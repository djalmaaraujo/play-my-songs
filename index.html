<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Play my songs</title>
  <link href='http://fonts.googleapis.com/css?family=Chau+Philomene+One' rel='stylesheet' type='text/css'>
  <style>
html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td,article,aside,canvas,details,embed,figure,figcaption,footer,header,hgroup,menu,nav,output,ruby,section,summary,time,mark,audio,video{border:0;font:inherit;font-size:100%;vertical-align:baseline;margin:0;padding:0;} html{line-height:1;} ol,ul{list-style:none;} table{border-collapse:collapse;border-spacing:0;} caption,th,td{text-align:left;font-weight:400;vertical-align:middle;} q,blockquote{quotes:none;} q:before,q:after,blockquote:before,blockquote:after{content:none;} a img{border:none;} article,aside,details,figcaption,figure,footer,header,hgroup,menu,nav,section,summary{display:block;} body,html{height:100%;background:url(assets/images/bg.png);font-family:Helvetica, Arial, sans-serif;} #container{position:relative;top:5%;width:25%;margin:0 auto;} #container h1{font-size:60px;color:#333;font-family:'Chau Philomene One', sans-serif;text-align:center;display:block;margin-bottom:50px;} #playlist{list-style-type:decimal;list-style-position:inside;counter-reset:item;padding:20px;} #playlist p{-webkit-border-radius:10px;-moz-border-radius:10px;-ms-border-radius:10px;-o-border-radius:10px;border-radius:10px;border:5px dotted #ccc;font-size:52px;color:#ccc;text-align:center;padding:100px;} #playlist li{border-bottom:1px solid #ccc;display:block;position:relative;padding:5px 10px;} #playlist li:before{content:counter(item) ". ";counter-increment:item;position:absolute;left:-36px;top:7px;background:#000;color:#FFF;width:29px;height:19px;text-align:center;font-size:13px;padding:6px 0 0;} #playlist li.active,#playlist li:hover{background:#000;} #playlist li.active a,#playlist li:hover a{color:#FFF;} #playlist li a{display:block;width:100%;line-height:30px;color:#666;font-size:15px;text-decoration:none;} #player{width:100%;text-align:center;padding-bottom:20px;} #player .basic-button,#player .play,#player .stop{-webkit-border-radius:100%;-moz-border-radius:100%;-ms-border-radius:100%;-o-border-radius:100%;border-radius:100%;background-image:linear-gradient(#e3e3e3,#dadcdb);-webkit-box-shadow:#000 0 0 10px;-moz-box-shadow:#000 0 0 10px;box-shadow:#000 0 0 10px;cursor:pointer;border:2px solid #e3e3e3;border-top:1px solid #FFF;font-family:'Chau Philomene One', sans-serif;text-align:center;color:#333;margin:0 10px;} #player .play{width:100px;height:100px;font-size:52px;} #player .stop{-webkit-border-radius:5px;-moz-border-radius:5px;-ms-border-radius:5px;-o-border-radius:5px;border-radius:5px;width:50px;height:50px;font-size:22px;}
  </style>
</head>
<body>

  <div id="container">
    <h1>Play my Songs</h1>

    <ol id="playlist">
      <p>Drag songs here</p>
    </ol>
  </div>

  <script src="//cdnjs.cloudflare.com/ajax/libs/zepto/1.0/zepto.min.js"></script>
  <script>
(function(){this.Playlist=function(){function e(e){this.storage=e;this.playlist=$("#playlist");this.populatePlaylist();this.handlerPlaySong();this.play(0)}e.prototype.handlerPlaySong=function(){var e=this;return this.playlist.on("click",function(t){var n;t.preventDefault();n=$(t.target).data("song");return e.play(n)})};e.prototype.populatePlaylist=function(){var e,t,n,r,i;this.playlist.html("");r=this.storage;i=[];for(t=0,n=r.length;t<n;t++){e=r[t];i.push(this.insertSong(e,t))}return i};e.prototype.play=function(e){var t;t=this;if(this.storage[e]){this.stop();this.loadFile(e);this.removeActiveClass();return this.playlist.find("a.song-"+e+"").parent().addClass("active")}};e.prototype.stop=function(){if(this.audioSource){this.audioSource.stop(0)}return this.createAudioAPIElements()};e.prototype.loadFile=function(e){var t,n;n=this;t=new FileReader;t.onload=function(e){return n.decodeAudio(e.target.result)};return t.readAsArrayBuffer(this.storage[e])};e.prototype.removeExtension=function(e){return e.split(".")[0]};e.prototype.createAudioAPIElements=function(){this.audioContext=new(window.AudioContext||window.webkitAudioContext);return this.audioSource=this.audioContext.createBufferSource()};e.prototype.decodeAudio=function(e){var t;t=this;if(t.audioContext.decodeAudioData){return t.audioContext.decodeAudioData(e,function(e){t.audioSource.buffer=e;t.audioSource.connect(t.audioContext.destination);t.audioSource.start(0);return setTimeout(function(){return t.stop()},t.audioSource.buffer.duration*1e3+1e3)},function(e){return alert("Error loading this file")})}};e.prototype.insertSong=function(e,t){if(e.type.match(/audio.*/)){return this.playlist.append('<li><a href="#" data-song="'+t+'" class="song-'+t+'">'+this.removeExtension(e.name)+"</a></li>")}};e.prototype.removeActiveClass=function(){return this.playlist.find("li").removeClass("active")};return e}()}).call(this)
  </script>
  <script>
  (function(){this.Drag=function(){function e(){this.holder=$("#playlist");this.handleDragOver();this.handleDragDrop()}e.prototype.handleDragOver=function(){var e=this;return this.holder.on("dragover",function(t){t.preventDefault();return e.holder.addClass("drag-over")})};e.prototype.handleDragDrop=function(){var e=this;return this.holder.on("drop",function(e){e.preventDefault();return new Playlist(e.dataTransfer.files)})};return e}()}).call(this)
  </script>
  <script>
    $(function () {
      new Drag();
    })
  </script>
</body>
</html>